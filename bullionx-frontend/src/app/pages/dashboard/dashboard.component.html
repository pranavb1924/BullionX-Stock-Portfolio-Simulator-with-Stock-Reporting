<!-- Header -->
<header class="header">
    <div class="logo">
      <div class="logo-icon"></div>
      <span>TradeSim</span>
    </div>
  
    <div class="user-info" *ngIf="user$ | async as user; else guest">
      <span id="userName">{{ user.firstName }} {{ user.lastName }}</span>
      <div class="user-avatar" id="userAvatar">
        {{ user.firstName[0] }}{{ user.lastName[0] }}
      </div>
    </div>
    <ng-template #guest>
      <div class="user-info">
        <span id="userName">Guest</span>
        <div class="user-avatar" id="userAvatar">--</div>
      </div>
    </ng-template>
  </header>
  
  <!-- Main Dashboard -->
  <div class="dashboard-container">
    <app-ticker [symbols]="trendingStocks"></app-ticker>
  
    <div class="grid-container">
      <main>
        <app-portfolio-summary
          [summary]="dash.calculateMetrics()"
          [holdings]="dash.holdings">
        </app-portfolio-summary>
  
        <div class="card">
          <h2 class="card-header">
            Market News
            <button class="btn btn-secondary">View All</button>
          </h2>
          <div id="newsContainer"></div>
        </div>
      </main>
  
      <aside class="sidebar">
        <div class="card">
          <h3 class="card-header">Add to Watchlist</h3>
          <app-stock-search
            [availableStocks]="dash.getAllAvailableStocks()"
            (stockSelected)="onStockSelected($event)">
          </app-stock-search>
        </div>
  
        <div class="card">
          <h3 class="card-header">
            Watchlist
            <span class="watchlist-counter">
              {{ dash.getWatchlistCount() }}/{{ dash.getMaxWatchlistSize() }}
            </span>
          </h3>
          <div id="watchlistContainer"></div>
        </div>
  
        <div class="card">
          <h3 class="card-header">Quick Actions</h3>
          <div style="display: flex; flex-direction: column; gap: 0.75rem;">
            <button class="btn btn-primary" style="width: 100%;">Buy Stock</button>
            <button class="btn btn-secondary" style="width: 100%;">Sell Stock</button>
            <button class="btn btn-secondary" style="width: 100%;">Market Research</button>
          </div>
        </div>
      </aside>
    </div>
  </div>
  
  <!-- Stock Card Modal -->
  <app-stock-card
    [stock]="selectedStock"
    [isVisible]="showStockCard"
    [isInWatchlist]="isSelectedStockInWatchlist"
    [isWatchlistFull]="dash.isWatchlistFull()"
    (close)="closeStockCard()"
    (addToWatchlistEvent)="onAddToWatchlist($event)"
    (removeFromWatchlistEvent)="onRemoveFromWatchlist($event)"
    (viewDetailsEvent)="onViewDetails($event)">
  </app-stock-card>
  